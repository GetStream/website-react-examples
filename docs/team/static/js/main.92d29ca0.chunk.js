(this.webpackJsonpteam=this.webpackJsonpteam||[]).push([[0],{439:function(e,t,n){},440:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(10),i=n(52),r=n(441),l=n(459),o=n(479),d=n.p+"static/media/photo-1438761681033-6461ffad8d80.613ac608.jpeg",u=n.p+"static/media/photo-1463453091185-61582044d556.3619e52a.jpeg",j=n.p+"static/media/photo-1503467913725-8484b65b0715.95ccd4b9.jpeg",h=n.p+"static/media/photo-1519345182560-3f2917c472ef.a2e6c02e.jpeg",m=n.p+"static/media/photo-1506089676908-3592f7389d4d.56a08c5d.jpeg",b=n.p+"static/media/photo-1507003211169-0a1dd7228f2d.63bee4f7.jpeg",v=n.p+"static/media/photo-1517202383675-eb0a6e27775f.4457c8ec.jpeg",p=n.p+"static/media/photo-1531251445707-1f000e1e87d0.be76211f.jpeg",O=n.p+"static/media/photo-1541271696563-3be2f555fc4e.24ecd158.jpeg",g=n.p+"static/media/photo-1542345812-d98b5cd6cf98.fc631d3d.jpeg",x=n.p+"static/media/photo-1546539782-6fc531453083.a7c849be.jpeg",f=n.p+"static/media/photo-1546623381-d6d69cd69955.84098cf1.jpeg",_=n.p+"static/media/photo-1546820389-44d77e1f3b31.879865ae.jpeg",C=n.p+"static/media/photo-1548946526-f69e2424cf45.c592c0d0.jpeg",k=n.p+"static/media/photo-1549351236-caca0f174515.d2fd8a6e.jpeg",y=n.p+"static/media/photo-1551069613-1904dbdcda11.6380bd9d.jpeg",w=n.p+"static/media/photo-1554384645-13eab165c24b.f45d7937.jpeg",N=n.p+"static/media/photo-1569443693539-175ea9f007e8.da18bfdc.jpeg",L=n.p+"static/media/photo-1573140247632-f8fd74997d5c.79b738bd.jpeg",M=n.p+"static/media/photo-1546456073-6712f79251bb.a031da78.jpeg",S=n.p+"static/media/photo-1502378735452-bc7d86632805.905b3e52.jpeg",E=n.p+"static/media/photo-1546967191-fdfb13ed6b1e.f4b6002c.jpeg",H=n.p+"static/media/photo-1502937406922-305bb2789e95.647d289b.jpeg",R=n.p+"static/media/photo-1552058544-f2b08422138a.ebadf7d3.jpeg",T=n(1),P=function(){return Object(T.jsx)("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M13.3518 6.686L6.75251 0.0866699L5.80984 1.02867L6.75318 1.972V1.97334L3.45318 5.272L3.45251 5.27334L2.50984 4.32934L1.56718 5.27267L4.39584 8.10067L0.624512 11.8713L1.56718 12.814L5.33851 9.04334L8.16718 11.8713L9.10984 10.9293L8.16718 9.986L11.4672 6.686L12.4098 7.62867L13.3518 6.686ZM7.22451 9.04267L7.22385 9.04334L4.39584 6.21467L7.69518 2.91467L10.5232 5.74267L7.22451 9.04267Z",fill:"#858688"})})},A=function(){return Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:Object(T.jsx)("path",{fill:"#fff",fillOpacity:"0.66",fillRule:"evenodd",d:"M2.7 6.95a4.25 4.25 0 117.306 2.954 1.001 1.001 0 00-.102.102A4.25 4.25 0 012.7 6.95zm7.906 5.07a6.25 6.25 0 111.414-1.414l2.987 2.987a1 1 0 11-1.414 1.414l-2.987-2.987z",clipRule:"evenodd"})})},I=[d,u,j,h,m,b,v,p,O,g,x,f,_,C,k,y,w,N,L,M,S,E,H,R],B=function(e){var t=e.chatClient,n=e.targetOrigin;Object(a.useEffect)((function(){var e,a=(e=n,function(t){window.parent.postMessage(t,e)}),c=function(e){var t,n=e.message;switch(e.type){case"reaction.new":a("react-to-message");break;case"message.new":if("giphy"===(null===n||void 0===n?void 0:n.command)){a("run-giphy");break}if(null===n||void 0===n||null===(t=n.attachments)||void 0===t?void 0:t.length){if("video"===n.attachments[0].type&&"https://youtu.be/Ujvy-DEA-UM"===n.attachments[0].og_scrape_url){a("send-youtube");break}if("image"===n.attachments[0].type){a("drag-drop-image");break}}if(null===n||void 0===n?void 0:n.parent_id){a("start-thread");break}a("send-message")}};return t&&t.on(c),function(){return null===t||void 0===t?void 0:t.off(c)}}),[t,n])},D=n(475),z=n(471),V=n(14),F=function(){return Promise.resolve()},U=c.a.createContext({activeWorkspace:"Chat",closeAdminPanel:F,displayWorkspace:F,pinnedMessageListOpen:!1,togglePinnedMessageListOpen:F,closePinnedMessageListOpen:F}),W=function(e){var t=e.children,n=Object(a.useState)("Chat"),c=Object(V.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(!1),l=Object(V.a)(r,2),o=l[0],d=l[1],u=Object(a.useCallback)((function(e){i(e),d(!1)}),[i]),j=Object(a.useCallback)((function(){u("Chat")}),[u]),h=Object(a.useCallback)((function(){return d((function(e){return!e}))}),[]),m=Object(a.useCallback)((function(){return d(!1)}),[]);return Object(T.jsx)(U.Provider,{value:{activeWorkspace:s,closeAdminPanel:j,displayWorkspace:u,pinnedMessageListOpen:o,closePinnedMessageListOpen:m,togglePinnedMessageListOpen:h},children:t})},Z=function(){return Object(a.useContext)(U)},G=n(44),K=n(28),q=n(42),J=n(5),$=Object(a.createContext)({handleInputChange:function(){return null},handleMemberSelect:function(){return null},handleSubmit:function(){return null},members:[],name:"",errors:{name:null,members:null}}),Y=function(e){var t=e.children,n=e.defaultValues,c=e.workspace,s=e.onSubmit,i=Object(J.b)(),r=i.client,l=i.channel,o=i.setActiveChannel,d=Object(a.useState)(n.name),u=Object(V.a)(d,2),j=u[0],h=u[1],m=Object(a.useState)(n.members),b=Object(V.a)(m,2),v=b[0],p=b[1],O=Object(a.useState)({name:null,members:null}),g=Object(V.a)(O,2),x=g[0],f=g[1],_=function(e){var t;return null===(t=e.match(/.*__(team|messaging)/))||void 0===t?void 0:t[1]}(c),C=function(e){return e.match("Channel-Create")?"create":e.match("Channel-Edit")?"update":void 0}(c),k=Object(a.useCallback)(function(){var e=Object(q.a)(Object(K.a)().mark((function e(t){var n,a,c;return Object(K.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,a=t.members,_&&0!==a.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r.channel(_,n,{name:n,members:a,demo:"team"});case 5:return c=e.sent,e.next=8,c.watch();case 8:o(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_,o,r]),y=Object(a.useCallback)(function(){var e=Object(q.a)(Object(K.a)().mark((function e(t){var n,a,c,s;return Object(K.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.name,s=t.members,c===((null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.name)||(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.id))){e.next=4;break}return e.next=4,null===l||void 0===l?void 0:l.update({name:c},{text:"Channel name changed to ".concat(c)});case 4:if(!(null===s||void 0===s?void 0:s.length)){e.next=7;break}return e.next=7,null===l||void 0===l?void 0:l.addMembers(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),w=Object(a.useCallback)((function(e){var t=e.action,a=e.createChannelType,c=e.values,s={name:null,members:null};return"create"===t&&(s={name:c.name||"team"!==a?null:"Channel name is required",members:c.members.length<2?"At least one additional member is required":null}),"update"===t&&c.name===n.name&&0===c.members.length&&(s={name:"Name not changed (change name or add members)",members:"No new members added (change name or add members)"}),Object.values(s).some((function(e){return!!e}))?s:null}),[n.name]),N=Object(a.useCallback)(function(){var e=Object(q.a)(Object(K.a)().mark((function e(t){var n;return Object(K.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=w({values:{name:j,members:v},action:C,createChannelType:_}))){e.next=5;break}return f(n),e.abrupt("return");case 5:if(e.prev=5,"create"!==C){e.next=9;break}return e.next=9,k({name:j,members:v});case 9:if("update"!==C){e.next=12;break}return e.next=12,y({name:j,members:v});case 12:s(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),[C,_,j,v,k,y,s,w]),L=Object(a.useCallback)((function(e){e.preventDefault(),h(e.target.value)}),[]),M=Object(a.useCallback)((function(e){p((function(t){var n=e.target.value;return e.target.checked?t.length?[].concat(Object(G.a)(t),[n]):[n]:null===t||void 0===t?void 0:t.filter((function(e){return e!==n}))}))}),[]);return Object(a.useEffect)((function(){h(n.name),p(n.members)}),[n,_]),Object(T.jsx)($.Provider,{value:{createChannelType:_,errors:x,name:j,members:v,handleInputChange:L,handleMemberSelect:M,handleSubmit:N},children:t})},Q=function(){return Object(a.useContext)($)},X=function(e){var t=e.onClick;return Object(T.jsx)("button",{children:Object(T.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,children:Object(T.jsx)("path",{d:"M6.10042 6.10051C0.633603 11.5673 0.633603 20.4327 6.10042 25.8995C11.5672 31.3663 20.4326 31.3663 25.8994 25.8995C31.3662 20.4327 31.3662 11.5673 25.8994 6.10051C20.4326 0.633686 11.5672 0.633685 6.10042 6.10051ZM22.3639 11.0503L17.4141 16L22.3639 20.9497L20.9497 22.364L15.9999 17.4142L11.0502 22.364L9.63596 20.9497L14.5857 16L9.63596 11.0503L11.0502 9.63604L15.9999 14.5858L20.9497 9.63604L22.3639 11.0503Z",fill:"var(--primary-color)"})})})},ee=function(e){var t=e.onClose,n=e.title;return Object(T.jsxs)("div",{className:"admin-panel__form-header",children:[Object(T.jsx)("div",{className:"workspace-header__title workspace-header__block",children:n}),Object(T.jsx)(X,{onClick:t})]})},te=function(e){var t=e.buttonText,n=e.onButtonClick;return Object(T.jsx)("div",{className:"admin-panel__form-footer",children:Object(T.jsx)("button",{onClick:n,children:t})})},ne=function(e){var t=e.errorMessage,n=void 0===t?"":t;return Object(T.jsx)("div",{className:"admin-panel__form-validation-error",children:n})},ae=function(e){var t=e.name,n=void 0===t?"":t,a=e.error,c=e.placeholder,s=void 0===c?"channel-name":c,i=e.onChange;return Object(T.jsxs)("div",{className:"channel-name-input-field",children:[Object(T.jsxs)("h2",{children:[Object(T.jsx)("span",{children:"Name"}),Object(T.jsx)(ne,{errorMessage:a})]}),Object(T.jsx)("input",{onChange:i,placeholder:s,type:"text",value:n})]})},ce=n(69),se=function(e){var t=e.children,n=Q(),a=n.errors,c=n.createChannelType,s=!c||"team"===c;return Object(T.jsxs)("div",{className:"user-list__container",children:[s&&Object(T.jsxs)("h2",{children:[Object(T.jsx)("span",{children:"Add Members"}),Object(T.jsx)(ne,{errorMessage:a.members})]}),Object(T.jsxs)("div",{className:"user-list__header user-list__row",children:[Object(T.jsxs)("div",{className:"user-list__column-block",children:[Object(T.jsx)("p",{children:"User"}),Object(T.jsx)("p",{className:"user-list__column--last-active",children:"Last Active"})]}),Object(T.jsx)("div",{className:"user-list__column--checkbox",children:Object(T.jsx)("p",{children:"Invite"})})]}),t]})},ie=["12 min ago","27 min ago","6 hours ago","14 hours ago"],re=function(e){var t=e.index,n=e.user,a=Q().handleMemberSelect,c=ie[t]||"Yesterday",s=n.name||n.id;return Object(T.jsxs)("label",{htmlFor:n.id,title:s,className:"user-list__row",children:[Object(T.jsxs)("div",{className:"user-list__column-block",children:[Object(T.jsxs)("div",{className:"user-list__column--user-data",children:[Object(T.jsx)(ce.a,{image:n.image,name:s,size:32}),Object(T.jsx)("p",{className:"user-item__name",children:s})]}),Object(T.jsx)("p",{className:"user-list__column--last-active",children:c})]}),Object(T.jsx)("div",{className:"user-list__column--checkbox",children:Object(T.jsx)("input",{type:"checkbox",name:"members",id:n.id,value:n.id,onChange:a})})]})},le={empty:"No users found.",error:"Error loading, please refresh and try again.",loading:"Loading users..."},oe=function(){var e,t=Object(J.b)(),n=t.client,c=t.channel,s=Q().createChannelType,i=Object(a.useState)(null),r=Object(V.a)(i,2),l=r[0],o=r[1],d=Object(a.useState)(),u=Object(V.a)(d,2),j=u[0],h=u[1],m=Object(a.useMemo)((function(){return(null===c||void 0===c?void 0:c.state.members)?Object.keys(c.state.members):[]}),[null===c||void 0===c||null===(e=c.state)||void 0===e?void 0:e.members]);return Object(a.useEffect)((function(){var e=function(){var e=Object(q.a)(Object(K.a)().mark((function e(){var t;return Object(K.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return o("loading"),e.prev=3,e.next=6,n.queryUsers({id:{$nin:m}},{id:1},{limit:8});case 6:(t=e.sent).users.length?h(t.users):o("empty"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),o("error");case 13:o(null);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();n&&e()}),[n,m,s]),Object(T.jsx)(se,{children:l?Object(T.jsx)("div",{className:"user-list__message",children:le[l]}):(null===j||void 0===j?void 0:j.length)&&j.map((function(e,t){return Object(T.jsx)(re,{index:t,user:e},e.id)}))})},de=function(){var e=Z().closeAdminPanel,t=Q(),n=t.createChannelType,a=t.name,c=t.handleInputChange,s=t.handleSubmit,i=t.errors;return Object(T.jsxs)("div",{className:"admin-panel__form",children:[Object(T.jsx)(ee,{onClose:e,title:"team"===n?"Create a New Channel":"Send a Direct Message"}),"team"===n&&Object(T.jsx)(ae,{error:i.name,name:a,onChange:c,placeholder:"channel-name (no spaces)"}),Object(T.jsx)(oe,{}),Object(T.jsx)(te,{onButtonClick:s,buttonText:"team"===n?"Create Channel":"Create Message Group"})]})},ue=function(){var e=Z().closeAdminPanel,t=Q(),n=t.name,a=t.handleInputChange,c=t.handleSubmit,s=t.errors;return Object(T.jsxs)("div",{className:"admin-panel__form",children:[Object(T.jsx)(ee,{onClose:e,title:"Edit Channel"}),Object(T.jsx)(ae,{name:n,error:s.name,onChange:a}),Object(T.jsx)(oe,{}),Object(T.jsx)(te,{buttonText:"Save Changes",onButtonClick:c})]})},je=function(){var e=Object(J.b)(),t=e.client,n=e.channel,c=Z(),s=c.displayWorkspace,i=c.activeWorkspace,r=Object(a.useCallback)((function(){return s("Chat")}),[s]),l={name:"",members:[]},o=null;if(i.match("Channel-Create"))l={members:t.userID?[t.userID]:[],name:""},o=de;else if(i.match("Channel-Edit")){var d,u;l={members:[],name:(null===n||void 0===n||null===(d=n.data)||void 0===d?void 0:d.name)||(null===n||void 0===n||null===(u=n.data)||void 0===u?void 0:u.id)},o=ue}return Object(T.jsx)(Y,{workspace:i,onSubmit:r,defaultValues:l,children:Object(T.jsx)("div",{className:"channel__container",children:o&&Object(T.jsx)(o,{})})})},he=n(11),me=n(9),be=n(473),ve=n(477),pe=n(478),Oe=n(476),ge=n(8),xe=n(212),fe=function(e){var t=e.onClick;return Object(T.jsx)("button",{onClick:t,className:"close-thread-icon",children:Object(T.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"none",viewBox:"0 0 40 40",children:[Object(T.jsx)("path",{fill:"var(--primary-color)",fillRule:"evenodd",d:"M27.563 25.442L22.12 20l5.442-5.442a1.496 1.496 0 000-2.12 1.496 1.496 0 00-2.121 0L20 17.878l-5.441-5.442a1.496 1.496 0 00-2.121 0 1.496 1.496 0 000 2.121L17.879 20l-5.441 5.442a1.496 1.496 0 000 2.12 1.496 1.496 0 002.12 0L20 22.122l5.442 5.442a1.496 1.496 0 002.12 0 1.504 1.504 0 000-2.121z",clipRule:"evenodd"}),Object(T.jsx)("rect",{width:"39",height:"39",x:"0.5",y:"0.5",stroke:"#E9E9EA",rx:"19.5"})]})})},_e=n(59),Ce=n(7),ke=n(58),ye=n(12),we=n(6),Ne=n(202),Le=n(470),Me=n(205),Se=n(480),Ee=n(36),He=n(481),Re=n(206),Te=n(207),Pe=n(21),Ae=n(472),Ie=function(e){var t,n,a=e.message;return a?Object(T.jsxs)("div",{className:"str-chat__message-team-pin-indicator",children:[Object(T.jsx)(P,{}),a.pinned_by?"Pinned by ".concat((null===(t=a.pinned_by)||void 0===t?void 0:t.name)||(null===(n=a.pinned_by)||void 0===n?void 0:n.id)):"Message pinned"]}):null},Be=function(e){var t,n,c,s,i,r,l,o,d,u,j,h,m,b,v=e.clearEditingState,p=e.editing,O=e.getMessageActions,g=e.groupStyles,x=e.handleAction,f=e.handleOpenThread,_=e.handleRetry,C=e.initialMessage,k=e.isReactionEnabled,y=e.message,w=e.messageWrapperRef,N=e.onMentionsClickMessage,L=e.onMentionsHoverMessage,M=e.onReactionListClick,S=e.onUserClick,E=e.onUserHover,H=e.reactionSelectorRef,R=e.renderText,P=void 0===R?ke.d:R,A=e.showDetailedReactions,I=e.threadList,B=Object(ye.b)("MessageTeam").Attachment,D=Object(we.g)("MessageTeam"),V=D.t,F=D.userLanguage,U=O(),W=Object(me.k)(U),Z=U.indexOf(me.a.reply)>-1&&!I,G=(null===(t=y.i18n)||void 0===t?void 0:t["".concat(F,"_text")])||y.text,K=y.mentioned_users,q=Object(a.useMemo)((function(){return P(G,K)}),[K,G,P]),J=g?g[0]:"single";if(y.deleted_at)return Object(T.jsx)(Ne.a,{message:y});if(p)return Object(T.jsxs)("div",{className:"str-chat__message-team str-chat__message-team--".concat(J," str-chat__message-team--editing"),"data-testid":"message-team-edit",children:[("top"===J||"single"===J)&&Object(T.jsx)("div",{className:"str-chat__message-team-meta",children:Object(T.jsx)(ce.a,{image:null===(h=y.user)||void 0===h?void 0:h.image,name:(null===(m=y.user)||void 0===m?void 0:m.name)||(null===(b=y.user)||void 0===b?void 0:b.id),onClick:S,onMouseOver:E,size:34})}),Object(T.jsx)(pe.a,{clearEditingState:v,Input:Le.a,message:y})]});var $=Object(Ce.a)("str-chat__message","str-chat__message-team","str-chat__message-team--".concat(J),(c={"pinned-message":y.pinned},Object(_e.a)(c,"str-chat__message-team--".concat(y.status),y.status),Object(_e.a)(c,"str-chat__message-team--".concat(y.type),y.type),Object(_e.a)(c,"str-chat__message--has-attachment",!!(null===(n=y.attachments)||void 0===n?void 0:n.length)),Object(_e.a)(c,"threadList",I),c));return Object(T.jsxs)(T.Fragment,{children:[y.pinned&&Object(T.jsx)(Ie,{message:y}),Object(T.jsxs)("div",{className:$,"data-testid":"message-team",ref:w,children:[Object(T.jsx)("div",{className:"avatar-host",children:"top"===J||"single"===J||C?Object(T.jsx)(ce.a,{image:null===(s=y.user)||void 0===s?void 0:s.image,name:(null===(i=y.user)||void 0===i?void 0:i.name)||(null===(r=y.user)||void 0===r?void 0:r.id),onClick:S,onMouseOver:E,size:34}):Object(T.jsx)("div",{"data-testid":"team-meta-spacer",style:{marginRight:0,width:34}})}),Object(T.jsxs)("div",{className:"str-chat__message-team-group",children:[("top"===J||"single"===J||C)&&Object(T.jsxs)("div",{className:"str-chat__message-team-meta",children:[Object(T.jsxs)("div",{className:"str-chat__message-team-author","data-testid":"message-team-author",onClick:S,children:[Object(T.jsx)("strong",{children:(null===(l=y.user)||void 0===l?void 0:l.name)||(null===(o=y.user)||void 0===o?void 0:o.id)}),"error"===y.type&&Object(T.jsx)("div",{className:"str-chat__message-team-error-header",children:V("Only visible to you")})]}),Object(T.jsx)(Me.a,{})]}),Object(T.jsxs)("div",{className:"str-chat__message-team-content str-chat__message-team-content--".concat(J," str-chat__message-team-content--").concat(""===y.text?"image":"text"),"data-testid":"message-team-content",children:[!C&&"sending"!==y.status&&"failed"!==y.status&&"system"!==y.type&&"ephemeral"!==y.type&&"error"!==y.type&&Object(T.jsxs)("div",{className:"str-chat__message-team-actions","data-testid":"message-team-actions",children:[A&&Object(T.jsx)(Se.a,{ref:H}),k&&Object(T.jsx)("span",{"data-testid":"message-team-reaction-icon",onClick:M,title:"Reactions",children:Object(T.jsx)(Ee.f,{})}),Z&&Object(T.jsx)("span",{"data-testid":"message-team-thread-icon",onClick:f,title:"Start a thread",children:Object(T.jsx)(Ee.h,{})}),W&&Object(T.jsx)(He.a,{inline:!0,messageWrapperRef:w})]}),y.text&&Object(T.jsx)("div",{className:Object(Ce.a)("str-chat__message-team-text",{"str-chat__message-team-text--is-emoji":Object(ke.c)(y.text)}),"data-testid":"message-team-message",onClick:N,onMouseOver:L,children:q}),!y.text&&(null===(d=y.attachments)||void 0===d?void 0:d.length)?Object(T.jsx)(B,{actionHandler:x,attachments:y.attachments}):null,0!==(null===(u=y.latest_reactions)||void 0===u?void 0:u.length)&&""!==y.text&&k&&Object(T.jsx)(z.a,{}),"failed"===y.status&&Object(T.jsxs)("button",{className:"str-chat__message-team-failed","data-testid":"message-team-failed",onClick:403!==y.errorStatusCode?function(){return _(y)}:void 0,children:[Object(T.jsx)(Ee.c,{}),403!==y.errorStatusCode?V("Message Failed \xb7 Click to try again"):V("Message Failed \xb7 Unauthorized")]})]}),Object(T.jsx)(Re.a,{messageType:"team"}),y.text&&(null===(j=y.attachments)||void 0===j?void 0:j.length)?Object(T.jsx)(B,{actionHandler:x,attachments:y.attachments}):null,y.latest_reactions&&0!==y.latest_reactions.length&&""===y.text&&k&&Object(T.jsx)(z.a,{}),!I&&Object(T.jsx)(Te.a,{onClick:f,reply_count:y.reply_count})]})]})]})},De=c.a.memo(Be,me.c),ze=function(e){var t=Object(Pe.b)("MessageTeam"),n=Z().closePinnedMessageListOpen,c=Object(a.useRef)(null),i=Object(a.useRef)(null),r=e.message||t.message,l=Object(Ae.a)(r,c,i),o=l.isReactionEnabled,d=l.onReactionListClick,u=l.showDetailedReactions;return Object(T.jsx)("div",{className:r.pinned?"pinned-message":"unpinned-message",children:Object(T.jsx)(De,Object(s.a)(Object(s.a)({},t),{},{isReactionEnabled:o,messageWrapperRef:i,onReactionListClick:d,reactionSelectorRef:c,showDetailedReactions:u,handleOpenThread:function(e){n(),t.handleOpenThread(e)}},e))})},Ve=function(){var e=Z(),t=e.pinnedMessageListOpen,n=e.togglePinnedMessageListOpen,a=Object(ge.b)().channel;return t?Object(T.jsxs)("div",{className:"pinned-messages__container",children:[Object(T.jsxs)("div",{className:"pinned-messages__header",children:[Object(T.jsx)("div",{className:"workspace-header__title",children:"Pins"}),Object(T.jsx)(fe,{onClick:n})]}),Object(T.jsx)("div",{className:"pinned-messages__list",children:a.state.pinnedMessages.map((function(e){return Object(T.jsx)(xe.a,{groupStyles:["single"],Message:ze,message:e},e.id)}))})]}):null},Fe=function(){return Object(T.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M8.16602 6.49837H9.83269V4.83171H8.16602V6.49837ZM8.99936 15.665C5.32351 15.665 2.33268 12.6743 2.33268 8.99833C2.33268 5.32253 5.32351 2.33171 8.99936 2.33171C12.6752 2.33171 15.666 5.32253 15.666 8.99833C15.666 12.6743 12.6752 15.665 8.99936 15.665ZM8.99936 0.665039C4.39684 0.665039 0.666016 4.39587 0.666016 8.99833C0.666016 13.6009 4.39684 17.3317 8.99936 17.3317C13.6019 17.3317 17.3327 13.6009 17.3327 8.99833C17.3327 4.39587 13.6019 0.665039 8.99936 0.665039ZM8.16602 13.165H9.83269V8.165H8.16602V13.165Z",fill:"black",fillOpacity:"0.33"})})},Ue=function(){var e,t,n,c=Z().displayWorkspace,s=Object(J.b)().client,i=Object(ge.b)(),r=i.channel,l=i.watcher_count,o=Object(he.b)().closeThread,d=Z().togglePinnedMessageListOpen,u="# ".concat((null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.name)||(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.id)||"random"),j=Object(a.useCallback)((function(){c("Admin-Channel-Edit")}),[c]),h=Object(a.useCallback)((function(e){null===o||void 0===o||o(e),d()}),[o,d]);return Object(T.jsxs)("div",{className:"team-channel-header__container",children:["messaging"===r.type?function(){var e=Object.values(r.state.members).filter((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.id)!==s.userID})),t=e.length-3;return e.length?Object(T.jsxs)("div",{className:"workspace-header__block",children:[e.map((function(e,t){var n=e.user;return t>2?null:Object(T.jsxs)("div",{className:"workspace-header__block-item",children:[Object(T.jsx)(ce.a,{image:null===n||void 0===n?void 0:n.image,name:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.id),size:32}),Object(T.jsx)("p",{className:"team-channel-header__name user",children:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.id)||"Johnny Blaze"})]},t)})),t>0&&Object(T.jsx)("p",{className:"team-channel-header__name user",children:"and ".concat(t," more")})]}):Object(T.jsxs)("div",{className:"workspace-header__block",children:[Object(T.jsx)(ce.a,{image:null,size:32}),Object(T.jsx)("p",{className:"team-channel-header__name user",children:"Johnny Blaze"})]})}():Object(T.jsxs)("div",{className:"workspace-header__block",children:[Object(T.jsx)("div",{className:"team-channel-header__name workspace-header__title",children:u}),Object(T.jsx)("button",{onClick:j,children:Object(T.jsx)(Fe,{})})]}),Object(T.jsxs)("div",{className:"workspace-header__block",children:[Object(T.jsx)("div",{className:"workspace-header__subtitle",children:(n=l,n?1===n?"1 user online":"".concat(n," users online"):"No users online")}),Object(T.jsxs)("button",{className:"workspace-header__subtitle",onClick:h,children:[Object(T.jsx)(P,{}),"Pins"]})]})]})},We=n(18),Ze=n(57),Ge=n(56),Ke=n(217),qe=function(){return Object(T.jsx)("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M2.75774 0.666748H5.66683L3.72744 4.54554H5.66683L2.03047 11.3334L2.75774 6.48493H0.333496L2.75774 0.666748Z",fill:"white"})})},Je=function(){return Object(T.jsxs)("div",{className:"giphy-icon__wrapper",children:[Object(T.jsx)(qe,{}),Object(T.jsx)("p",{className:"giphy-icon__text",children:"GIPHY"})]})},$e={bold:function(){return Object(T.jsx)("svg",{width:"10",height:"12",viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M7.63 5.82C8.46 5.24 9 4.38 9 3.5C9 1.57 7.43 0 5.5 0H0V12H6.25C8.04 12 9.5 10.54 9.5 8.75C9.5 7.45 8.73 6.34 7.63 5.82ZM2.5 2H5.25C6.08 2 6.75 2.67 6.75 3.5C6.75 4.33 6.08 5 5.25 5H2.5V2ZM5.75 10H2.5V7H5.75C6.58 7 7.25 7.67 7.25 8.5C7.25 9.33 6.58 10 5.75 10Z"})})},code:function(){return Object(T.jsx)("svg",{width:"20",height:"12",viewBox:"0 0 20 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M7.4 10.6L2.8 6L7.4 1.4L6 0L0 6L6 12L7.4 10.6ZM12.6 10.6L17.2 6L12.6 1.4L14 0L20 6L14 12L12.6 10.6Z"})})},emoji:function(){return Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:Object(T.jsx)("path",{fillRule:"evenodd",d:"M1.6 8a6.4 6.4 0 1112.8 0A6.4 6.4 0 011.6 8zM8 0a8 8 0 100 16A8 8 0 008 0zM6 7.2a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zM11.2 6a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zM5.455 9.141a.8.8 0 10-1.31.918c.542.774 1.578 1.737 2.962 2.024 1.46.303 3.1-.184 4.688-1.948a.8.8 0 00-1.19-1.07C9.313 10.5 8.22 10.68 7.433 10.517c-.863-.18-1.586-.817-1.978-1.376z",clipRule:"evenodd"})})},italics:function(){return Object(T.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M4 0V2H6.58L2.92 10H0V12H8V10H5.42L9.08 2H12V0H4Z"})})},"strike-through":function(){return Object(T.jsx)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M3.76889 5.11111C3.53778 4.68444 3.42222 4.19556 3.42222 3.62667C3.42222 3.08444 3.53778 2.59556 3.77778 2.14222C4.00889 1.69778 4.33778 1.31556 4.76444 0.995555C5.19111 0.684444 5.69778 0.435556 6.27556 0.257778C6.86222 0.0888889 7.51111 0 8.21333 0C8.93333 0 9.58222 0.0977777 10.1778 0.302222C10.7644 0.497778 11.2711 0.782222 11.68 1.13778C12.0978 1.49333 12.4178 1.92 12.64 2.40889C12.8622 2.89778 12.9778 3.43111 12.9778 4.01778H10.3022C10.3022 3.74222 10.2578 3.49333 10.1689 3.26222C10.0889 3.02222 9.95556 2.82667 9.77778 2.65778C9.6 2.48889 9.37778 2.36444 9.11111 2.26667C8.84444 2.17778 8.52444 2.12444 8.16889 2.12444C7.82222 2.12444 7.51111 2.16 7.25333 2.24C6.99556 2.32 6.78222 2.42667 6.61333 2.56C6.44444 2.70222 6.31111 2.86222 6.22222 3.04889C6.13333 3.23556 6.08889 3.43111 6.08889 3.63556C6.08889 4.06222 6.31111 4.41778 6.74667 4.71111C7.08444 4.93333 7.43111 5.13778 8 5.33333H3.90222C3.85778 5.26222 3.80444 5.18222 3.76889 5.11111ZM16 8V6.22222H0V8H8.55111C8.71111 8.06222 8.90667 8.12444 9.04 8.17778C9.36889 8.32889 9.62667 8.48 9.81333 8.63111C10 8.78222 10.1244 8.95111 10.1956 9.13778C10.2578 9.31556 10.2933 9.52 10.2933 9.75111C10.2933 9.95556 10.2489 10.1511 10.1689 10.3378C10.0889 10.5156 9.96445 10.6756 9.79556 10.8089C9.62667 10.9422 9.42222 11.04 9.16444 11.12C8.90667 11.1911 8.60444 11.2356 8.26667 11.2356C7.88444 11.2356 7.52889 11.2 7.21778 11.12C6.90667 11.04 6.63111 10.9156 6.40889 10.7467C6.18667 10.5778 6.00889 10.3556 5.88444 10.08C5.76 9.80444 5.66222 9.40444 5.66222 9.00445H3.02222C3.02222 9.49333 3.09333 10.0089 3.23556 10.4089C3.37778 10.8089 3.56444 11.1644 3.81333 11.4844C4.06222 11.7956 4.34667 12.0711 4.68444 12.3022C5.01333 12.5333 5.37778 12.7289 5.76889 12.88C6.16 13.0311 6.56889 13.1467 6.99556 13.2267C7.42222 13.2978 7.84889 13.3422 8.27556 13.3422C8.98667 13.3422 9.63556 13.2622 10.2133 13.0933C10.7911 12.9244 11.2889 12.6933 11.6978 12.3911C12.1067 12.0889 12.4267 11.7067 12.6489 11.2622C12.8711 10.8178 12.9867 10.3111 12.9867 9.74222C12.9867 9.20889 12.8978 8.72889 12.7111 8.31111C12.6667 8.21333 12.6133 8.10667 12.56 8.01778H16V8Z"})})}},Ye=Object(a.forwardRef)((function(e,t){var n=e.active,a=e.onClick,c=e.type,s=$e[c];return s?Object(T.jsx)("button",{className:Object(Ce.a)("message-input__controls-button",c,{active:n}),onClick:a,ref:t,children:Object(T.jsx)(s,{})}):null})),Qe=function(){return Object(T.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M0.5 12L13.5 6L0.5 0V4.66666L9.8125 6L0.5 7.33334V12Z"})})},Xe=c.a.createContext({}),et=function(e){var t=e.children,n=Object(a.useState)({"main-input":!1,"thread-input":!1}),c=Object(V.a)(n,2),i=c[0],r=c[1],l=Object(a.useCallback)((function(e){r((function(t){return e?Object(s.a)(Object(s.a)({},t),{},{"thread-input":!1}):Object(s.a)(Object(s.a)({},t),{},{"main-input":!1})}))}),[]),o=Object(a.useCallback)((function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{"main-input":!1})}))}),[]),d=Object(a.useCallback)((function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{"thread-input":!1})}))}),[]),u=Object(a.useCallback)((function(e){return e?i["thread-input"]:i["main-input"]}),[i]),j=Object(a.useCallback)((function(){return i["main-input"]}),[i]),h=Object(a.useCallback)((function(){return i["thread-input"]}),[i]),m=Object(a.useCallback)((function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{"main-input":!0})}))}),[]),b=Object(a.useCallback)((function(){r((function(e){return Object(s.a)(Object(s.a)({},e),{},{"thread-input":!0})}))}),[]);return Object(T.jsx)(Xe.Provider,{value:{clearGiphyFlag:l,clearGiphyFlagMainInput:o,clearGiphyFlagThread:d,inputHasGiphyMessage:u,isComposingGiphyMessage:j,isComposingGiphyReply:h,setComposeGiphyMessageFlag:m,setComposeGiphyReplyFlag:b},children:t})},tt=function(){return Object(a.useContext)(Xe)},nt=function(){var e=tt(),t=e.isComposingGiphyReply,n=e.clearGiphyFlagThread,c=e.setComposeGiphyReplyFlag,i=Object(We.b)(),r=i.openEmojiPicker,l=i.closeEmojiPicker,o=i.emojiPickerIsOpen,d=Object(a.useState)(null),u=Object(V.a)(d,2),j=u[0],h=u[1],m=Object(a.useState)(null),b=Object(V.a)(m,2),v=b[0],p=b[1],O=Object(Ke.a)(j,v,{placement:"top-end"}),g=O.styles,x=O.attributes,f=Object(a.useCallback)((function(e){var a=e.nativeEvent instanceof InputEvent&&"deleteContentBackward"===e.nativeEvent.inputType;1===i.text.length&&a&&n(),i.text.startsWith("/giphy")&&!t()&&(console.log("replacing"),e.target.value=e.target.value.replace("/giphy",""),c()),i.handleChange(e)}),[n,i,c,t]);return Object(T.jsxs)("div",{className:"thread-message-input__wrapper",children:[Object(T.jsxs)("div",{className:"thread-message-input__input",children:[t()&&Object(T.jsx)(Je,{}),Object(T.jsx)(Ze.a,{onChange:f,placeholder:"Reply"}),Object(T.jsx)(Ye,{type:"emoji",onClick:o?l:r,ref:h}),Object(T.jsx)("button",{className:"thread-message-input__send-button",disabled:!i.numberOfUploads&&!i.text.length,onClick:i.handleSubmit,children:Object(T.jsx)(Qe,{})})]}),o&&Object(T.jsx)("div",Object(s.a)(Object(s.a)({className:"str-chat__message-textarea-emoji-picker-container",style:g.popper},x.popper),{},{ref:p,children:Object(T.jsx)(Ge.a,{})}))]})},at=function(){var e=tt(),t=e.inputHasGiphyMessage,n=e.clearGiphyFlag,c=Object(he.b)().sendMessage,r=Object(s.a)(Object(s.a)({},me.d.team),{},{user:!0}),l=Object(s.a)(Object(s.a)({},me.d.messaging),{},{user:!0}),o=Object(s.a)(Object(s.a)({},me.d),{},{team:r,messaging:l}),d=Object(a.useCallback)((function(e){var a,r={attachments:e.attachments,mentioned_users:e.mentioned_users,parent_id:null===(a=e.parent)||void 0===a?void 0:a.id,parent:e.parent,text:e.text},l=!!r.parent_id;if(t(l)){var o="/giphy ".concat(e.text);r=Object(s.a)(Object(s.a)({},r),{},{text:o})}if(c){var d=c(r);Object(i.b)(d,"send message"),n(l)}}),[t,c,n]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(be.a,{children:[Object(T.jsx)(Ue,{}),Object(T.jsx)(ve.a,{disableQuotedMessages:!0,pinPermissions:o}),Object(T.jsx)(pe.a,{grow:!0,overrideSubmitHandler:d})]}),Object(T.jsx)(Oe.a,{additionalMessageInputProps:{grow:!0,Input:nt,overrideSubmitHandler:d}}),Object(T.jsx)(Ve,{})]})},ct=function(){return Object(T.jsxs)("svg",{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(T.jsx)("circle",{cx:"36",cy:"36",r:"36",fill:"var(--primary-color)"}),Object(T.jsx)("path",{d:"M34.5368 33.696H38.5688L37.8548 38.904H33.7808L34.5368 33.696ZM29.2028 42.684L28.0268 51H32.1008L33.2768 42.684H37.3088L36.1748 51H40.2488L41.3828 42.684H45.0368V38.904H41.9288L42.6428 33.696H46.2968V29.916H43.1888L44.3228 21.6H40.2488L39.1148 29.916H35.0408L36.2168 21.6H32.1428L30.9668 29.916H26.9768V33.696H30.4628L29.7068 38.904H25.7168V42.684H29.2028Z",fill:"white"})]})},st=function(){var e,t,n,a=Object(J.b)(),c=a.channel,s=a.client,i=Object.values((null===c||void 0===c||null===(e=c.state)||void 0===e?void 0:e.members)||{}).filter((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.id)!==s.userID}));return Object(T.jsxs)("div",{className:"channel-empty__container",children:["team"===(null===c||void 0===c?void 0:c.type)?Object(T.jsx)(ct,{}):i.length?Object(T.jsx)("div",{className:"channel-empty__avatars",children:i.map((function(e,t){var n,a,c;return t>2?null:Object(T.jsx)(ce.a,{image:null===(n=e.user)||void 0===n?void 0:n.image,name:(null===(a=e.user)||void 0===a?void 0:a.name)||(null===(c=e.user)||void 0===c?void 0:c.id),size:72},t)}))}):Object(T.jsx)(ce.a,{size:72}),Object(T.jsxs)("p",{className:"channel-empty__main-description",children:["This is the beginning of your chat history","team"===(null===c||void 0===c?void 0:c.type)?" in ":" with ","team"===(null===c||void 0===c?void 0:c.type)?"#".concat((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.name)||(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.id)):function(){var e,t,n,a,c,s;if(1===i.length)return Object(T.jsx)("span",{className:"channel-empty__user-name",children:"@".concat((null===(e=i[0].user)||void 0===e?void 0:e.name)||(null===(t=i[0].user)||void 0===t?void 0:t.id))});if(2===i.length)return Object(T.jsx)("span",{className:"channel-empty__user-name",children:"@".concat((null===(n=i[0].user)||void 0===n?void 0:n.name)||(null===(a=i[0].user)||void 0===a?void 0:a.id)," and @").concat((null===(c=i[1].user)||void 0===c?void 0:c.name)||(null===(s=i[1].user)||void 0===s?void 0:s.id))});var r="";return i.forEach((function(e,t){var n,a,c,s;t!==i.length-1?r="".concat(r,"@").concat((null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.name)||(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.id),", "):r="".concat(r," and @").concat((null===e||void 0===e||null===(c=e.user)||void 0===c?void 0:c.name)||(null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.id))})),Object(T.jsx)("span",{className:"channel-empty__user-name",children:r||"the Universe"})}(),"."]}),Object(T.jsx)("p",{className:"channel-empty__secondary-description",children:"Send messages, attachments, links, emojis, and more."})]})},it=n(214),rt=n(19),lt=n(112),ot=function(){var e=Object(ye.b)().TypingIndicator,t=Object(ge.b)(),n=t.acceptedFiles,c=void 0===n?[]:n,i=t.multipleUploads,r=Object(We.b)(),l=r.handleSubmit,o=r.numberOfUploads,d=r.text,u=r.uploadNewFiles,j=r.maxFilesLeft,h=r.isUploadEnabled,m=r.openEmojiPicker,b=r.closeEmojiPicker,v=r.emojiPickerIsOpen,p=tt().isComposingGiphyMessage,O=function(){var e,t,n=Object(J.b)().client,c=Object(ge.b)().channel,s=Object(We.b)(),i=tt(),r=i.isComposingGiphyMessage,l=i.clearGiphyFlagMainInput,o=i.setComposeGiphyMessageFlag,d=Object(a.useState)(null),u=Object(V.a)(d,2),j=u[0],h=u[1],m=Object(a.useMemo)((function(){var e,t,a="the group";"team"===c.type&&(a="#".concat((null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.name)||(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.id)||"random"));var s,i,r,l,o=Object.values(c.state.members).filter((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.id)!==n.userID}));return o.length&&1!==o.length||(a=(null===(s=o[0])||void 0===s||null===(i=s.user)||void 0===i?void 0:i.name)||(null===(r=o[0])||void 0===r||null===(l=r.user)||void 0===l?void 0:l.id)||"Johnny Blaze"),"Message ".concat(a)}),[c.type,c.state.members,null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.id,null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.name,n.userID]),b=Object(a.useCallback)((function(e){var t=e.target.value,n=e.nativeEvent instanceof InputEvent&&"deleteContentBackward"===e.nativeEvent.inputType;1===s.text.length&&n&&l(),r()||!s.text.startsWith("/giphy")||s.numberOfUploads||(e.target.value=t.replace("/giphy",""),o()),"bold"===j?e.target.value=n?"".concat(t.slice(0,t.length-2),"**"):"**".concat(t.replace(/\**/g,""),"**"):"code"===j?e.target.value=n?"".concat(t.slice(0,t.length-1),"`"):"`".concat(t.replace(/`/g,""),"`"):"italics"===j?e.target.value=n?"".concat(t.slice(0,t.length-1),"*"):"*".concat(t.replace(/\*/g,""),"*"):"strike-through"===j&&(e.target.value=n?"".concat(t.slice(0,t.length-2),"~~"):"~~".concat(t.replace(/~~/g,""),"~~")),s.handleChange(e)}),[j,s,l,r,o]),v=Object(a.useCallback)((function(){h((function(e){return"bold"===e?null:"bold"}))}),[]),p=Object(a.useCallback)((function(){h((function(e){return"italics"===e?null:"italics"}))}),[]),O=Object(a.useCallback)((function(){h((function(e){return"strike-through"===e?null:"strike-through"}))}),[]),g=Object(a.useCallback)((function(){h((function(e){return"code"===e?null:"code"}))}),[]);return{formatting:j,handleBoldButtonClick:v,handleCodeButtonClick:g,handleItalicsButtonClick:p,handleStrikeThroughButtonClick:O,placeholder:m,onChange:b}}(),g=O.formatting,x=O.handleBoldButtonClick,f=O.handleCodeButtonClick,_=O.handleItalicsButtonClick,C=O.handleStrikeThroughButtonClick,k=O.onChange,y=O.placeholder,w=Object(a.useMemo)((function(){return c.reduce((function(e,t){var n;return null!==(n=e[t])&&void 0!==n||(e[t]=[]),e}),{})}),[c]),N=Object(lt.a)({accept:w,disabled:!h||0===j,multiple:i,noClick:!0,onDrop:u}),L=N.getRootProps,M=N.isDragActive,S=N.isDragReject;return Object(T.jsxs)("div",Object(s.a)(Object(s.a)({},L({className:Object(Ce.a)("team-message-input__wrapper")})),{},{children:[M&&Object(T.jsxs)("div",{className:Object(Ce.a)("str-chat__dropzone-container",{"str-chat__dropzone-container--not-accepted":S}),children:[!S&&Object(T.jsx)("p",{children:"Drag your files here"}),S&&Object(T.jsx)("p",{children:"Some of the files will not be accepted"})]}),Object(T.jsxs)("div",{className:"team-message-input__input",children:[Object(T.jsxs)("div",{className:"team-message-input__top",children:[!!o&&Object(T.jsx)(it.a,{}),Object(T.jsxs)("div",{className:"team-message-input__form",children:[p()&&!o&&Object(T.jsx)(Je,{}),Object(T.jsx)(Ze.a,{onChange:k,placeholder:y}),Object(T.jsx)(rt.j,{disabled:!o&&!d.length,sendMessage:l})]})]}),Object(T.jsxs)("div",{className:"team-message-input__bottom",children:[Object(T.jsx)(Ye,{type:"emoji",onClick:v?b:m}),Object(T.jsx)(Ye,{type:"bold",active:"bold"===g,onClick:x}),Object(T.jsx)(Ye,{type:"italics",active:"italics"===g,onClick:_}),Object(T.jsx)(Ye,{type:"strike-through",active:"strike-through"===g,onClick:C}),Object(T.jsx)(Ye,{type:"code",active:"code"===g,onClick:f})]})]}),e&&Object(T.jsx)(e,{}),Object(T.jsx)(Ge.a,{})]}))},dt=n(106),ut=function(){var e=Object(J.b)().client,t=Object(dt.b)().typing;if(!e||!t)return null;var n=Object.values(t).filter((function(t){var n,a=t.user;return(null===a||void 0===a?void 0:a.id)!==(null===(n=e.user)||void 0===n?void 0:n.id)})).map((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.id)}));if(!n.length)return null;var a="Someone is typing";return 1===n.length?a="".concat(n[0]," is typing"):2===n.length?a="".concat(n[0]," and ").concat(n[1]," are typing"):n.length>2&&(a="".concat(n[0]," and ").concat(n.length-1," more are typing")),Object(T.jsxs)("div",{className:"typing-indicator__input",children:[Object(T.jsxs)("div",{className:"dots",children:[Object(T.jsx)("div",{className:"dot"}),Object(T.jsx)("div",{className:"dot"}),Object(T.jsx)("div",{className:"dot"})]}),Object(T.jsx)("div",{className:"typing-indicator__input__text",children:a})]})},jt=function(e){var t=e.closeThread,n=e.thread;return Object(T.jsxs)("div",{className:"custom-thread-header",children:[Object(T.jsxs)("div",{className:"workspace-header__block",children:[Object(T.jsx)("div",{className:"workspace-header__title",children:"Thread"}),Object(T.jsx)("div",{className:"workspace-header__subtitle",children:(null===n||void 0===n?void 0:n.reply_count)?1===n.reply_count?"1 reply":"".concat(n.reply_count," replies"):""})]}),Object(T.jsx)(fe,{onClick:t})]})},ht=function(){return null},mt=function(){return Z().activeWorkspace.match("Admin")?Object(T.jsx)(je,{}):Object(T.jsx)("div",{className:"channel__container",children:Object(T.jsx)(D.a,{EmptyStateIndicator:st,LoadingIndicator:ht,Input:ot,Message:ze,ReactionsList:z.a,ThreadHeader:jt,TypingIndicator:ut,children:Object(T.jsx)(et,{children:Object(T.jsx)(at,{})})})})},bt=n(474),vt=n(78),pt=n.n(vt),Ot=function(e){return void 0!==e.cid},gt=function(){var e=Object(q.a)(Object(K.a)().mark((function e(t){var n,a,c,s,i,r,l,o;return Object(K.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,a=t.setActiveChannel,c=t.user,s={type:"messaging",member_count:2,members:{$eq:[c.id,n.userID||""]}},e.next=4,n.queryChannels(s);case 4:if(i=e.sent,r=Object(V.a)(i,1),!(l=r[0])){e.next=9;break}return e.abrupt("return",a(l));case 9:return o=n.channel("messaging",{members:[c.id,n.userID||""]}),e.abrupt("return",a(o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(e){var t=e.focusedId,n=e.result,a=e.setChannel,c=Object(J.b)(),s=c.client,i=c.setActiveChannel;if(Ot(n)){var r,l=n;return Object(T.jsxs)("div",{onClick:function(){return a(l)},className:Object(Ce.a)("channel-search__result-container",{highlighted:t===l.id}),children:[Object(T.jsx)("div",{className:"result-hashtag",children:"#"}),Object(T.jsx)("p",{className:"channel-search__result-text",children:null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.name})]})}var o=n;return Object(T.jsxs)("div",{onClick:function(){gt({client:s,setActiveChannel:i,user:o})},className:Object(Ce.a)("channel-search__result-container",{highlighted:t===o.id}),children:[Object(T.jsx)(ce.a,{image:o.image,name:o.name||o.id,size:24}),Object(T.jsx)("p",{className:"channel-search__result-text",children:o.name||o.id||"Johnny Blaze"})]})},ft=function(e){var t=e.teamChannels,n=e.directChannels,a=e.focusedId,c=e.loading,s=e.setChannel,i=e.setQuery;return document.addEventListener("click",(function(){return i("")})),Object(T.jsxs)("div",{className:"channel-search__results",children:[Object(T.jsx)("p",{className:"channel-search__results-header",children:"Channels"}),c&&!(null===t||void 0===t?void 0:t.length)&&Object(T.jsx)("p",{className:"channel-search__results-header",children:Object(T.jsx)("i",{children:"Loading..."})}),c||(null===t||void 0===t?void 0:t.length)?null===t||void 0===t?void 0:t.map((function(e,t){return Object(T.jsx)(xt,{result:e,focusedId:a,setChannel:s},t)})):Object(T.jsx)("p",{className:"channel-search__results-header",children:Object(T.jsx)("i",{children:"No channels found"})}),Object(T.jsx)("p",{className:"channel-search__results-header",children:"Users"}),c&&!(null===n||void 0===n?void 0:n.length)&&Object(T.jsx)("p",{className:"channel-search__results-header",children:Object(T.jsx)("i",{children:"Loading..."})}),c||(null===n||void 0===n?void 0:n.length)?null===n||void 0===n?void 0:n.map((function(e,t){return Object(T.jsx)(xt,{result:e,focusedId:a,setChannel:s},t)})):Object(T.jsx)("p",{className:"channel-search__results-header",children:Object(T.jsx)("i",{children:"No direct messages found"})})]})},_t=function(){var e=Object(J.b)(),t=e.client,n=e.setActiveChannel,c=Object(a.useState)(),s=Object(V.a)(c,2),i=s[0],r=s[1],l=Object(a.useState)(),o=Object(V.a)(l,2),d=o[0],u=o[1],j=Object(a.useState)(),h=Object(V.a)(j,2),m=h[0],b=h[1],v=Object(a.useState)(),p=Object(V.a)(v,2),O=p[0],g=p[1],x=Object(a.useState)(""),f=Object(V.a)(x,2),_=f[0],C=f[1],k=Object(a.useState)(!1),y=Object(V.a)(k,2),w=y[0],N=y[1],L=Object(a.useState)(""),M=Object(V.a)(L,2),S=M[0],E=M[1],H=Object(a.useCallback)((function(e){if("ArrowDown"===e.key)g((function(e){return void 0===e||void 0===i||e===i.length-1?0:e+1}));else if("ArrowUp"===e.key)g((function(e){return void 0===e||void 0===i?0:0===e?i.length-1:e-1}));else if("Enter"===e.key){if(e.preventDefault(),void 0!==i&&void 0!==O){var a=i[O];Ot(a)?n(a):gt({client:t,setActiveChannel:n,user:a})}g(void 0),C(""),E("")}}),[i,t,O,n]);Object(a.useEffect)((function(){return S&&document.addEventListener("keydown",H),function(){return document.removeEventListener("keydown",H)}}),[H,S]),Object(a.useEffect)((function(){S||(u([]),b([]))}),[S]),Object(a.useEffect)((function(){O&&O>=0&&i&&C(i[O].id||"")}),[i,O]);var R=function(){var e=Object(q.a)(Object(K.a)().mark((function e(n){var a,c,s,i,l,o;return Object(K.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.queryChannels({type:"team",name:{$autocomplete:n}},{},{limit:5}),c=t.queryUsers({id:{$ne:t.userID||""},$and:[{name:{$autocomplete:n}}]},{id:1},{limit:5}),e.next=5,Promise.all([a,c]);case 5:s=e.sent,i=Object(V.a)(s,2),l=i[0],o=i[1].users,l.length&&u(l),o.length&&b(o),r([].concat(Object(G.a)(l),Object(G.a)(o))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),E("");case 17:N(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),P=pt()(R,100,{trailing:!0});return Object(T.jsxs)("div",{className:"channel-search__container",children:[Object(T.jsxs)("div",{className:"channel-search__input__wrapper",children:[Object(T.jsx)("div",{className:"channel-search__input__icon",children:Object(T.jsx)(A,{})}),Object(T.jsx)("input",{onChange:function(e){e.preventDefault(),N(!0),g(void 0),E(e.target.value),e.target.value&&P(e.target.value)},placeholder:"Search",type:"text",value:S})]}),S&&Object(T.jsx)(ft,{teamChannels:d,directChannels:m,focusedId:_,loading:w,setChannel:function(e){E(""),n(e)},setQuery:E})]})},Ct=function(e){var t=e.onClick;return Object(T.jsx)("button",{onClick:t,children:Object(T.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M7 0C3.13438 0 0 3.13438 0 7C0 10.8656 3.13438 14 7 14C10.8656 14 14 10.8656 14 7C14 3.13438 10.8656 0 7 0ZM11 7.5H7.5V11H6.5V7.5H3V6.5H6.5V3H7.5V6.5H11V7.5Z",fill:"white",fillOpacity:"0.66"})})})},kt=function(e){var t=e.children,n=e.error,c=void 0!==n&&n,s=e.loading,i=e.type,r=Z().displayWorkspace,l=Object(a.useCallback)((function(){r("Admin-Admin-Channel-Create__".concat(i))}),[i,r]);return c?"team"===i?Object(T.jsx)("div",{className:"team-channel-list",children:Object(T.jsx)("p",{className:"team-channel-list__message",children:"Connection error, please wait a moment and try again."})}):null:s?Object(T.jsx)("div",{className:"team-channel-list",children:Object(T.jsxs)("p",{className:"team-channel-list__message loading",children:["team"===i?"Channels":"Messages"," loading...."]})}):Object(T.jsxs)("div",{className:"team-channel-list",children:[Object(T.jsxs)("div",{className:"team-channel-list__header",children:[Object(T.jsx)("p",{className:"team-channel-list__header__title",children:"team"===i?"Channels":"Direct Messages"}),Object(T.jsx)(Ct,{onClick:l})]}),t]})},yt=c.a.memo(kt),wt=function(e){var t,n,a,c,s,i,r,l,o,d,u=e.channel,j=Object(J.b)().client,h=Object.values(u.state.members).filter((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.id)!==j.userID})),m="Johnny Blaze";if(!h.length||1===h.length){var b,v,p,O,g,x=h[0];return Object(T.jsxs)("div",{className:"channel-preview__item single",children:[Object(T.jsx)(ce.a,{image:null===(b=x.user)||void 0===b?void 0:b.image,name:(null===(v=x.user)||void 0===v?void 0:v.name)||(null===(p=x.user)||void 0===p?void 0:p.id),size:24}),Object(T.jsx)("p",{children:(null===x||void 0===x||null===(O=x.user)||void 0===O?void 0:O.name)||(null===x||void 0===x||null===(g=x.user)||void 0===g?void 0:g.id)||m})]})}return Object(T.jsxs)("div",{className:"channel-preview__item multi",children:[Object(T.jsx)("span",{children:Object(T.jsx)(ce.a,{image:null===(t=h[0].user)||void 0===t?void 0:t.image,name:(null===(n=h[0].user)||void 0===n?void 0:n.name)||(null===(a=h[0].user)||void 0===a?void 0:a.id),size:18})}),Object(T.jsx)(ce.a,{image:null===(c=h[1].user)||void 0===c?void 0:c.image,name:(null===(s=h[1].user)||void 0===s?void 0:s.name)||(null===(i=h[1].user)||void 0===i?void 0:i.id),size:18}),Object(T.jsxs)("p",{children:[(null===(r=h[0].user)||void 0===r?void 0:r.name)||(null===(l=h[0].user)||void 0===l?void 0:l.id)||m,","," ",(null===(o=h[1].user)||void 0===o?void 0:o.name)||(null===(d=h[1].user)||void 0===d?void 0:d.id)||m]})]})},Nt=function(e){var t=e.name;return Object(T.jsx)("div",{className:"channel-preview__item",children:Object(T.jsx)("p",{children:"# ".concat(t)})})},Lt=function(e){var t,n,c=e.channel,s=e.type,i=Object(J.b)(),r=i.channel,l=i.setActiveChannel,o=Z().displayWorkspace,d=Object(a.useCallback)((function(){o("Chat"),l&&l(c)}),[c,o,l]);return Object(T.jsx)("button",{className:Object(Ce.a)("channel-preview",{selected:(null===c||void 0===c?void 0:c.id)===(null===r||void 0===r?void 0:r.id)}),onClick:d,children:"team"===s?Object(T.jsx)(Nt,{name:(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.name)||(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.id)||"random"}):Object(T.jsx)(wt,{channel:c})})},Mt=function(){return Object(T.jsx)("svg",{width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(T.jsx)("path",{d:"M17.0903 16L21.3143 0.291999H17.9263L15.3523 11.116H15.3083L12.6243 0.291999H9.39031L6.6623 10.984H6.6183L4.1323 0.291999H0.678305L4.8363 16H8.3343L10.9523 5.308H10.9963L13.6583 16H17.0903Z",fill:"var(--primary-color)"})})},St=[{type:"team",demo:"team"},{type:"messaging",demo:"team"}],Et={state:!0,watch:!0,presence:!0,limit:3},Ht={last_message_at:-1,updated_at:-1},Rt=function(){return Object(T.jsx)("div",{className:"sidebar__company-selection-bar",children:Object(T.jsx)("div",{className:"sidebar__company-badge",children:Object(T.jsx)(Mt,{})})})},Tt=function(e){return e.filter((function(e){return"team"===e.type}))},Pt=function(e){return e.filter((function(e){return"messaging"===e.type}))},At=function(){return Object(T.jsx)(bt.a,{channelRenderFilterFn:Tt,filters:St[0],options:Et,sort:Ht,List:function(e){return Object(T.jsx)(yt,Object(s.a)(Object(s.a)({},e),{},{type:"team"}))},Preview:function(e){return Object(T.jsx)(Lt,Object(s.a)(Object(s.a)({},e),{},{type:"team"}))}})},It=function(){return Object(T.jsx)(bt.a,{channelRenderFilterFn:Pt,filters:St[1],options:Et,sort:Ht,setActiveChannelOnMount:!1,List:function(e){return Object(T.jsx)(yt,Object(s.a)(Object(s.a)({},e),{},{type:"messaging"}))},Preview:function(e){return Object(T.jsx)(Lt,Object(s.a)(Object(s.a)({},e),{},{type:"messaging"}))}})},Bt=function(){return Object(T.jsxs)("div",{className:"sidebar",children:[Object(T.jsx)(Rt,{}),Object(T.jsxs)("div",{className:"channel-list-bar",children:[Object(T.jsx)("div",{className:"channel-list-bar__header",children:Object(T.jsx)("p",{className:"channel-list-bar__header__text",children:"Worksly"})}),Object(T.jsx)(_t,{}),Object(T.jsx)(At,{}),Object(T.jsx)(It,{})]})]})},Dt=new URLSearchParams(window.location.search),zt=Dt.get("apikey")||"dz5f4d5kzrue",Vt=Dt.get("user")||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STREAM_KEY:"dz5f4d5kzrue"}).REACT_APP_USER_ID,Ft=Dt.get("theme")||"light",Ut=Dt.get("user_token")||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STREAM_KEY:"dz5f4d5kzrue"}).REACT_APP_USER_TOKEN,Wt=Dt.get("target_origin")||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STREAM_KEY:"dz5f4d5kzrue"}).REACT_APP_TARGET_ORIGIN,Zt=new r.a({language:"en",translationsForLanguage:Object(s.a)({},l)}),Gt=i.a.getInstance(zt,{enableInsights:!0,enableWSFallback:!0});Gt.connectUser({id:Vt,name:Vt,image:function(){var e=Math.floor(24*Math.random()),t=I[e];return"string"===typeof t?t:""}()},Ut);var Kt=function(){return B({chatClient:Gt,targetOrigin:Wt}),Object(a.useEffect)((function(){var e=function(e){var t=document.documentElement;e.length&&7===e.length&&(t.style.setProperty("--primary-color","".concat(e,"E6")),t.style.setProperty("--primary-color-alpha","".concat(e,"1A")))};return window.addEventListener("message",(function(t){return e(t.data)})),function(){Gt.disconnectUser(),window.removeEventListener("message",(function(t){return e(t.data)}))}}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"app__wrapper str-chat",children:Object(T.jsx)(o.a,{client:Gt,i18nInstance:Zt,theme:"team ".concat(Ft),children:Object(T.jsxs)(W,{children:[Object(T.jsx)(Bt,{}),Object(T.jsx)(mt,{})]})})})})},qt=n(211);n(439);Object(qt.createRoot)(document.getElementById("root")).render(Object(T.jsx)(Kt,{}))}},[[440,1,2]]]);
//# sourceMappingURL=main.92d29ca0.chunk.js.map